

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Optimization &mdash; Levitate Python Toolbox 2.4.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utilities" href="utilities.html" />
    <link rel="prev" title="Fields" href="fields.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Levitate Python Toolbox
          

          
          </a>

          
            
            
              <div class="version">
                2.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../package.html">Package Organization and Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../package.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#algorithms">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#basic-trap">Basic Trap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#field-superposition">Field Superposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#complex-setups">Complex Setups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#force-diagrams">Force Diagrams</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="transducers.html">Transducers</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Fields</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.visualizers">Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.materials">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.hardware">Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="field_wrappers.html">Field Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#basic-types">Basic Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#squared-types">Squared Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multifield">MultiField</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multipoint">MultiPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#implementation-details">Implementation Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#class-list">Class list</a><ul>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#public-api">Public API</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#id2">Basic Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#magnitude-squared-types">Magnitude Squared Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multifields">MultiFields</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multipoints">MultiPoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#private-classes">Private Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Levitate Python Toolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">API Documentation</a> &raquo;</li>
        
      <li>Optimization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api_docs/optimization.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-levitate.optimization">
<span id="optimization"></span><h1>Optimization<a class="headerlink" href="#module-levitate.optimization" title="Permalink to this headline">¶</a></h1>
<p>Procedures and algorithms for numerical optimization.</p>
<p>The main method currently in use for acoustic levitation (in this package)
is nonlinear numerical minimization of a cost function. The cost funcion
should be constructed using the <a class="reference internal" href="fields.html#module-levitate.fields" title="levitate.fields"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fields</span></code></a> module.</p>
<dl class="function">
<dt id="levitate.optimization.minimize">
<code class="sig-prename descclassname">levitate.optimization.</code><code class="sig-name descname">minimize</code><span class="sig-paren">(</span><em class="sig-param">functions</em>, <em class="sig-param">array</em>, <em class="sig-param">start_values=None</em>, <em class="sig-param">use_real_imag=False</em>, <em class="sig-param">constrain_transducers=None</em>, <em class="sig-param">variable_amplitudes=False</em>, <em class="sig-param">callback=None</em>, <em class="sig-param">precall=None</em>, <em class="sig-param">basinhopping=False</em>, <em class="sig-param">minimize_kwargs=None</em>, <em class="sig-param">return_optim_status=False</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.optimization.minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimizes a set of cost functions.</p>
<p>The cost function should have the signature <code class="xref py py-obj docutils literal notranslate"><span class="pre">f(complex_amplitudes)</span></code>
where <code class="xref py py-obj docutils literal notranslate"><span class="pre">complex_amplitudes</span></code> is an ndarray with weight of each element in the transducer array.
The function should return <code class="xref py py-obj docutils literal notranslate"><span class="pre">value,</span> <span class="pre">jacobians</span></code> where the jacobians are the
derivatives of the value w.r.t the transducers as defined in the full documentation.
Also see the documentation of the field wrappers for further details.</p>
<p>This function supports minimization sequences. Pass an iterable of functions
to start sequenced minimization, e.g. a list of cost functions.
The arguments: <code class="xref py py-obj docutils literal notranslate"><span class="pre">use_real_imag</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">variable_amplitudes</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">constrain_transducers</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">callback</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">precall</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">basinhopping</span></code>, and  <code class="xref py py-obj docutils literal notranslate"><span class="pre">minimize_kwargs</span></code> can be given as single
values or as iterables of the same length as <code class="xref py py-obj docutils literal notranslate"><span class="pre">functions</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>functions</strong> – The cost function that should be minimized. A single callable, or an
iterable of callables, as described above.</p></li>
<li><p><strong>array</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray</span></code>) – The array from which the cost functions are created.</p></li>
<li><p><strong>start_values</strong> (<em>complex ndarray</em><em>, </em><em>optional</em>) – The start values for the optimization. Will default to 1 for all
transducers if not given. Note that the precall for minimization
sequences can overrule this value.</p></li>
<li><p><strong>use_real_imag</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>default False</em>) – Toggles if the optimization should run using the phase-amplitude formulation
or the real-imag formulation.</p></li>
<li><p><strong>constrain_transducers</strong> (<em>array_like</em>) – Specifies a number of transducers which are constant elements in the
minimization. Will be used as the second argument in <code class="xref py py-obj docutils literal notranslate"><span class="pre">np.delete</span></code></p></li>
<li><p><strong>variable_amplitudes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Toggles the usage of varying amplitudes in the minimization.
If <code class="xref py py-obj docutils literal notranslate"><span class="pre">use_real_imag</span></code> is False ‘phases first’ is also a valid argument for this
parameter. The minimizer will then automatically sequence to optimize first with
fixed then with variable amplitudes, returning only the last result.</p></li>
<li><p><strong>callback</strong> (<em>callable</em>) – A callback function which will be called after each step in sequenced
minimization. Return false from the callback to break the sequence.
Should have the signature :
<code class="xref py py-obj docutils literal notranslate"><span class="pre">callback(array=array,</span> <span class="pre">result=result,</span> <span class="pre">optim_status=opt_res,</span> <span class="pre">idx=idx)</span></code></p></li>
<li><p><strong>precall</strong> (<em>callable</em>) – Initialization function which will be called with the array phases,
amplitudes, and the sequence index before each sequence step.
Must return the initial phases and amplitudes for the sequence step.
Default sets the phases and amplitudes to the solution of the previous
sequence step, or the original state for the first iteration.
Should have the signature :
<code class="xref py py-obj docutils literal notranslate"><span class="pre">precall(complex_amplitudes,</span> <span class="pre">idx)</span></code></p></li>
<li><p><strong>basinhopping</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Specifies if basinhopping should be used. Pass an int to specify the
number of basinhopping iterations, or True to use default value.</p></li>
<li><p><strong>return_optim_status</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Toggles the <code class="xref py py-obj docutils literal notranslate"><span class="pre">optim_status</span></code> output.</p></li>
<li><p><strong>minimize_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Extra keyword arguments which will be passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.minimize</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>result</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code>) – The array phases and amplitudes after minimization.
Stacks sequenced results in the first dimension.</p></li>
<li><p><strong>optim_status</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">OptimizeResult</span></code>) – Scipy optimization result structure. Optional output,
toggle with the corresponding input argument.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utilities.html" class="btn btn-neutral float-right" title="Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fields.html" class="btn btn-neutral float-left" title="Fields" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Carl Andersson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>