

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Arrays &mdash; Levitate Python Toolbox 2.3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fields" href="fields.html" />
    <link rel="prev" title="Transducers" href="transducers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Levitate Python Toolbox
          

          
          </a>

          
            
            
              <div class="version">
                2.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../package.html">Package Organization and Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../package.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#algorithms">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#basic-trap">Basic Trap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#field-superposition">Field Superposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#complex-setups">Complex Setups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#force-diagrams">Force Diagrams</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="transducers.html">Transducers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.visualize">Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.materials">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html#module-levitate.hardware">Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="field_wrappers.html">Field Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#basic-types">Basic Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#squared-types">Squared Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multifield">MultiField</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multipoint">MultiPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#implementation-details">Implementation Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#class-list">Class list</a><ul>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#public-api">Public API</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#id2">Basic Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#magnitude-squared-types">Magnitude Squared Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multifields">MultiFields</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multipoints">MultiPoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#private-classes">Private Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Levitate Python Toolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">API Documentation</a> &raquo;</li>
        
      <li>Arrays</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api_docs/arrays.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-levitate.arrays">
<span id="arrays"></span><h1>Arrays<a class="headerlink" href="#module-levitate.arrays" title="Permalink to this headline">Â¶</a></h1>
<p>Handling of transducer arrays, grouping multiple transducer elements.</p>
<p>The main class is the <a class="reference internal" href="#levitate.arrays.TransducerArray" title="levitate.arrays.TransducerArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray</span></code></a> class, but other classes exist to
simplify the creation of the transducer positions for common array geometries.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#levitate.arrays.TransducerArray" title="levitate.arrays.TransducerArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray</span></code></a></p></td>
<td><p>Base class to handle transducer arrays.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#levitate.arrays.RectangularArray" title="levitate.arrays.RectangularArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RectangularArray</span></code></a></p></td>
<td><p>TransducerArray implementation for rectangular arrays.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#levitate.arrays.DoublesidedArray" title="levitate.arrays.DoublesidedArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DoublesidedArray</span></code></a></p></td>
<td><p>TransducerArray implementation for doublesided arrays.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#levitate.arrays.DragonflyArray" title="levitate.arrays.DragonflyArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DragonflyArray</span></code></a></p></td>
<td><p>Rectangular array with Ultrahaptics Dragonfly U5 layout.</p></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="levitate.arrays.TransducerArray">
<em class="property">class </em><code class="sig-prename descclassname">levitate.arrays.</code><code class="sig-name descname">TransducerArray</code><span class="sig-paren">(</span><em class="sig-param">transducer_positions</em>, <em class="sig-param">transducer_normals</em>, <em class="sig-param">transducer_model=None</em>, <em class="sig-param">transducer_size=0.01</em>, <em class="sig-param">transducer_kwargs=None</em>, <em class="sig-param">medium=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Base class to handle transducer arrays.</p>
<p>This class has no notion of the layout. If possible, try to use a more specific
implementation instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transducer_positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The positions of the transducer elements in the array, shape 3xN.</p></li>
<li><p><strong>transducer_normals</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The normals of the transducer elements in the array, shape 3xN.</p></li>
<li><p><strong>transducer_model</strong> â An object of <a class="reference internal" href="transducers.html#levitate.transducers.TransducerModel" title="levitate.transducers.TransducerModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">levitate.transducers.TransducerModel</span></code></a> or a subclass. If passed a class it will create a new instance.</p></li>
<li><p><strong>transducer_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â Fallback transducer size if no transducer model object is given, or if no grid is given.</p></li>
<li><p><strong>transducer_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) â Extra keyword arguments used when instantiating a new transducer model.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>phases</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The phases of the transducer elements.</p></li>
<li><p><strong>amplitudes</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The amplitudes of the transducer elements.</p></li>
<li><p><a class="reference internal" href="#levitate.arrays.TransducerArray.complex_amplitudes" title="levitate.arrays.TransducerArray.complex_amplitudes"><strong>complex_amplitudes</strong></a> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â Transducer element controls on complex form.</p></li>
<li><p><strong>num_transducers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The number of transducers used.</p></li>
<li><p><strong>transducer_positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â As above.</p></li>
<li><p><strong>transducer_normals</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â As above.</p></li>
<li><p><strong>transducer_model</strong> (<a class="reference internal" href="transducers.html#levitate.transducers.TransducerModel" title="levitate.transducers.TransducerModel"><em>TransducerModel</em></a>) â An instance of a specific transducer model implementation.</p></li>
<li><p><strong>calculate</strong> (<a class="reference internal" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator" title="levitate.arrays.TransducerArray.PersistentFieldEvaluator"><em>PersistentFieldEvaluator</em></a>) â Use to perform cashed field calculations.</p></li>
<li><p><strong>freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â Frequency of the transducer model.</p></li>
<li><p><strong>omega</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â Angular frequency of the transducer model.</p></li>
<li><p><strong>k</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â Wavenumber in air, corresponding to <code class="xref py py-obj docutils literal notranslate"><span class="pre">freq</span></code>.</p></li>
<li><p><strong>wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â Wavelength in air, corresponding to <code class="xref py py-obj docutils literal notranslate"><span class="pre">freq</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="levitate.arrays.TransducerArray.complex_amplitudes">
<em class="property">property </em><code class="sig-name descname">complex_amplitudes</code><a class="headerlink" href="#levitate.arrays.TransducerArray.complex_amplitudes" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Transducer element controls on complex form.</p>
<p>The complex form of the transducer element controls is a convenience form.
The returned value will be calculated from the normal phases and amplitudes.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not try to set a single complex element as <code class="xref py py-obj docutils literal notranslate"><span class="pre">array.complex_amplitudes[0]</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">1j</span></code>.
It will not change the underlying phases and amplitudes, only the temporary complex numpy array.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.focus_phases">
<code class="sig-name descname">focus_phases</code><span class="sig-paren">(</span><em class="sig-param">focus</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.focus_phases" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Focuses the phases to create a focus point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>focus</strong> (<em>array_like</em>) â Three element array with a location where to focus.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>phases</strong> (<em>numpy.ndarray</em>) â Array with the phases for the transducer elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.signature">
<code class="sig-name descname">signature</code><span class="sig-paren">(</span><em class="sig-param">position</em>, <em class="sig-param">phases=None</em>, <em class="sig-param">stype=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.signature" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the phase signature of the array.</p>
<p>The signature of an array if the phase of the transducer elements
when the phase required to focus all elements to a specific point
has been removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>array_like</em>) â Three element array with a position for where the signature is relative to.</p></li>
<li><p><strong>phases</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) â The phases of which to calculate the signature.
Will default to the current phases in the array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signature</strong> (<em>numpy.ndarray</em>) â The signature wrapped to the interval [-pi, pi].</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.pressure_derivs">
<code class="sig-name descname">pressure_derivs</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">orders=3</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.pressure_derivs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate derivatives of the pressure.</p>
<p>Calculates the spatial derivatives of the pressure from all individual
transducers in a Cartesian coordinate system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to evaluate the derivatives, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p></li>
<li><p><strong>orders</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â How many orders of derivatives to calculate. Currently three orders are supported.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>derivatives</strong> (<em>ndarray</em>) â Array with the calculated derivatives. Has the shape (M, N, â¦) where M is the number of spatial derivatives,
and N is the number of transducers, see <code class="xref py py-obj docutils literal notranslate"><span class="pre">num_spatial_derivatives</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">spatial_derivative_order</span></code>,
and the remaining dimensions are the same as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">positions</span></code> input with the first dimension removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.spherical_harmonics">
<code class="sig-name descname">spherical_harmonics</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">orders=0</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.spherical_harmonics" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Spherical harmonics expansion of transducer sound fields.</p>
<p>The sound fields generated by the individual transducers in the array are expanded
in spherical harmonics around the positions specified. The coefficients are calculated
using analytical translation of the transducer radiation patterns. This is a simplified
calculation which will not account for the local directivity curve, only an overall
scaling for each transducer-position combination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to evaluate the derivatives, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p></li>
<li><p><strong>orders</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default 0</em>) â The maximum order to expand to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>spherical_harmonics_coefficients</strong> (<em>numpy.ndarray</em>) â Array with the calculated expansion coefficients. The order of the coefficients
are described in <a class="reference internal" href="utilities.html#levitate.utils.SphericalHarmonicsIndexer" title="levitate.utils.SphericalHarmonicsIndexer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SphericalHarmonicsIndexer</span></code></a>.
Has shape (M, N, â¦) where <code class="xref py py-obj docutils literal notranslate"><span class="pre">M=len(SphericalHarmonicsIndexer(orders))</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">N</span></code> is the number of transducers in the array, and the remaining dimensions are
the same as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">positions</span></code> input with the first dimension removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.request">
<code class="sig-name descname">request</code><span class="sig-paren">(</span><em class="sig-param">requests</em>, <em class="sig-param">position</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.request" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Evaluate a set of requests.</p>
<p>This takes a mapping (e.g. dict) of requests, and evaluates them
at a given position. This is independent of the current transducer state.
If a certain quantity should be calculated with regards to the current
transducer state, use a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FieldImplementation</span></code> from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">fields</span></code> module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>ndarray</em>) â The position where to calculate the requirements needed, shape (3,â¦).</p></li>
<li><p><strong>requests</strong> (<em>mapping</em><em>, </em><em>e.g. dict</em>) â <p>A mapping of the desired requests. The keys in the mapping should
start with the desired output, and the value indicates some kind of
parameter set. Possible requests listed below:</p>
<blockquote>
<div><dl class="simple">
<dt>pressure_derivs</dt><dd><p>A number of spatial derivatives of the pressure. Should contain the
maximum order of differentiation, see <a class="reference internal" href="#levitate.arrays.TransducerArray.pressure_derivs" title="levitate.arrays.TransducerArray.pressure_derivs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pressure_derivs</span></code></a>.</p>
</dd>
<dt>spherical_harmonics</dt><dd><p>Spherical harmonics coefficients for an expansion of the pressure.
Should contain the maximum order of expansion, see <a class="reference internal" href="#levitate.arrays.TransducerArray.spherical_harmonics" title="levitate.arrays.TransducerArray.spherical_harmonics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spherical_harmonics</span></code></a>.</p>
</dd>
</dl>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>evaluated_requests</strong> (<em>dict</em>) â A dictionary of the set of calculated data, according to the requests.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator">
<em class="property">class </em><code class="sig-name descname">PersistentFieldEvaluator</code><span class="sig-paren">(</span><em class="sig-param">array</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implementation of cashed field calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>array</strong> (<a class="reference internal" href="#levitate.arrays.TransducerArray" title="levitate.arrays.TransducerArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray</span></code></a>) â The array of which to calculate the fields.</p>
</dd>
</dl>
<dl class="method">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator.pressure_derivs">
<code class="sig-name descname">pressure_derivs</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">orders=3</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator.pressure_derivs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Cashed wrapper around <a class="reference internal" href="#levitate.arrays.TransducerArray.pressure_derivs" title="levitate.arrays.TransducerArray.pressure_derivs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray.pressure_derivs</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator.pressure">
<code class="sig-name descname">pressure</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">complex_amplitudes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator.pressure" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the pressure field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to calculate the pressure, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pressure</strong> (<em>numpy.ndarray</em>) â The complex pressure amplitudes, shape (â¦) as the positions.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator.velocity">
<code class="sig-name descname">velocity</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">complex_amplitudes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator.velocity" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the velocity field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to calculate the velocity, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>velocity</strong> (<em>numpy.ndarray</em>) â The complex vector particle velocity, shape (3, â¦) as the positions.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator.force">
<code class="sig-name descname">force</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">complex_amplitudes=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator.force" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the force field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to calculate the force, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>force</strong> (<em>numpy.ndarray</em>) â The vector radiation force, shape (3, â¦) as the positions.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.arrays.TransducerArray.PersistentFieldEvaluator.stiffness">
<code class="sig-name descname">stiffness</code><span class="sig-paren">(</span><em class="sig-param">positions</em>, <em class="sig-param">complex_amplitudes=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.TransducerArray.PersistentFieldEvaluator.stiffness" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the stiffness field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>positions</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) â The location(s) at which to calculate the stiffness, shape (3, â¦).
The first dimension must have length 3 and represent the coordinates of the points.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>force</strong> (<em>numpy.ndarray</em>) â The radiation stiffness, shape (â¦) as the positions.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.arrays.RectangularArray">
<em class="property">class </em><code class="sig-prename descclassname">levitate.arrays.</code><code class="sig-name descname">RectangularArray</code><span class="sig-paren">(</span><em class="sig-param">shape=16</em>, <em class="sig-param">spread=0.01</em>, <em class="sig-param">offset=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">0)</em>, <em class="sig-param">normal=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">1)</em>, <em class="sig-param">rotation=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.RectangularArray" title="Permalink to this definition">Â¶</a></dt>
<dd><p>TransducerArray implementation for rectangular arrays.</p>
<p>Defines the locations and normals of elements (transducers) in an array.
For rotated arrays, the rotation is as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A grid of the correct layout is crated in the xy-plane</p></li>
<li><p>The grid is rotated to the desired plane, as defined by the normal.</p></li>
<li><p>The grid is rotated around the normal.</p></li>
</ol>
</div></blockquote>
<p>The rotation to the desired plane is around the line where the desired
plane intersects with the xy-plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>)</em><em>, </em><em>default 16</em>) â The number of transducer elements. Passing a single int will create a square array.</p></li>
<li><p><strong>spread</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><em>default 10e-3</em>) â The distance between the array elements.</p></li>
<li><p><strong>offset</strong> (<em>3 element array_like</em><em>, </em><em>default</em><em> (</em><em>0</em><em>, </em><em>0</em><em>, </em><em>0</em><em>)</em>) â The location of the center of the array.</p></li>
<li><p><strong>normal</strong> (<em>3 element array_like</em><em>, </em><em>default</em><em> (</em><em>0</em><em>, </em><em>0</em><em>, </em><em>1</em><em>)</em>) â The normal of all elements in the array.</p></li>
<li><p><strong>rotation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><em>default 0</em>) â The in-plane rotation of the array around the normal.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="levitate.arrays.RectangularArray.signature">
<code class="sig-name descname">signature</code><span class="sig-paren">(</span><em class="sig-param">position=None</em>, <em class="sig-param">stype=None</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.RectangularArray.signature" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate phase signatures of the array.</p>
<p>The signature of an array if the phase of the transducer elements
when the phase required to focus all elements to a specific point
has been removed. If <code class="xref py py-obj docutils literal notranslate"><span class="pre">stype</span></code> if set to one of the available
signatures: âtwinâ, âvortexâ, or âbottleâ, the corresponding
signature is returned.</p>
<p>The signatures and the additional keyword parameters for them are:</p>
<dl>
<dt>Current signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype=None</span></code>)</dt><dd><p>Calculates the current phase signature. See <a class="reference internal" href="#levitate.arrays.TransducerArray.signature" title="levitate.arrays.TransducerArray.signature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray.signature</span></code></a></p>
<dl class="simple">
<dt>phases (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, optional)</dt><dd><p>The phases of which to calculate the signature.
Will default to the current phases in the array.</p>
</dd>
</dl>
</dd>
<dt>Twin signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype='twin'</span></code>)</dt><dd><p>Calculates the twin trap signature which shifts the phase of half
of the elements by pi, splitting the array along a straight line.</p>
<dl class="simple">
<dt>angle (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>, optional)</dt><dd><p>The angle between the x-axis and the dividing line.
Default is to create a line perpendicular to the line from the
center of the array to <code class="xref py py-obj docutils literal notranslate"><span class="pre">position</span></code>.</p>
</dd>
</dl>
</dd>
<dt>Vortex signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype='vortex'</span></code>)</dt><dd><p>Calculates the vortex trap signature which phase shifts the
elements in the array according to their angle in the coordinate
plane.</p>
<dl class="simple">
<dt>angle (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>, optional)</dt><dd><p>Additional angle to rotate the phase signature with.</p>
</dd>
</dl>
</dd>
<dt>Bottle signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype='bottle'</span></code>)</dt><dd><p>Calculates the bottle trap signature which phase shifts the
elements in the array according to their distance from the center,
creating an inner zone and an outer zone of equal area with a
relative shift of pi.</p>
<dl class="simple">
<dt>radius (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>, optional)</dt><dd><p>A custom radius to use for the division of transducers.
The default is to use equal area partition based on the
rectangular area occupied by each transducer. This gives the
same number of transducers in the two groups for square arrays.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>array_like</em>) â Three element array with a location for where the signature is relative to.</p></li>
<li><p><strong>stype</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>, </em><em>'twin'</em><em>, </em><em>'bottle'</em><em>, </em><em>'vortex'. Default None</em>) â Chooses which type of signature to calculate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signature</strong> (<em>numpy.ndarray</em>) â The signature wrapped to the interval [-pi, pi].</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.arrays.DoublesidedArray">
<em class="property">class </em><code class="sig-prename descclassname">levitate.arrays.</code><code class="sig-name descname">DoublesidedArray</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">separation</em>, <em class="sig-param">normal=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">1)</em>, <em class="sig-param">offset=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">0)</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.DoublesidedArray" title="Permalink to this definition">Â¶</a></dt>
<dd><p>TransducerArray implementation for doublesided arrays.</p>
<p>Creates a doublesided array based on mirroring a singlesided array.
This can easily be used to create standard doublesided arrays by using
the same normal for the mirroring as for the original array. If a different
normal is used it is possible to create e.g. v-shaped arrays.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The singlesided array is âcenteredâ at the origin, where âcenterâ is
defined as the mean coordinate of the elements.</p></li>
<li><p>The singlesided array is shifted with half of the separation in the
opposite direction of the normal to create the âlowerâ half.</p></li>
<li><p>The âupperâ half is created by mirroring the âlowerâ half in the plane
described by the normal.</p></li>
<li><p>Both halves are offset with a specified vector.</p></li>
</ol>
</div></blockquote>
<p>Note that only the orientation of the initial array matters, not the
overall position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (Instance or (sub)class of <a class="reference internal" href="#levitate.arrays.TransducerArray" title="levitate.arrays.TransducerArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray</span></code></a>.) â The singlesided object used to the creation of the doublesided array.
Classes will be instantiated to generate the array, using all input
arguments except <a class="reference external" href="https://docs.python.org/3/library/array.html#module-array" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">separation</span></code>, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">offset</span></code>.</p></li>
<li><p><strong>separation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) â The distance between the two halves, along the normal.</p></li>
<li><p><strong>offset</strong> (<em>array_like</em><em>, </em><em>3 elements</em>) â The placement of the center between the two arrays.</p></li>
<li><p><strong>normal</strong> (<em>array_like</em><em>, </em><em>3 elements</em>) â The normal of the reflection plane.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="levitate.arrays.DoublesidedArray.signature">
<code class="sig-name descname">signature</code><span class="sig-paren">(</span><em class="sig-param">position=None</em>, <em class="sig-param">stype=None</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.DoublesidedArray.signature" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate phase signatures of the array.</p>
<p>The signature of an array if the phase of the transducer elements
when the phase required to focus all elements to a specific point
has been removed. If <code class="xref py py-obj docutils literal notranslate"><span class="pre">stype</span></code> if set to one of the available
signatures the corresponding signature is returned. The signatures
of the array used when creating the doublesided array are also available.</p>
<p>The signatures and the additional keyword parameters for them are:</p>
<dl>
<dt>Current signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype=None</span></code>)</dt><dd><p>Calculates the current phase signature. See <a class="reference internal" href="#levitate.arrays.TransducerArray.signature" title="levitate.arrays.TransducerArray.signature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransducerArray.signature</span></code></a></p>
<dl class="simple">
<dt>phases (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, optional)</dt><dd><p>The phases of which to calculate the signature.
Will default to the current phases in the array.</p>
</dd>
</dl>
</dd>
<dt>Doublesided signature (<code class="xref py py-obj docutils literal notranslate"><span class="pre">stype='doublesided'</span></code>)</dt><dd><p>Calculates the doublesided trap signature which shifts the phase
of one side of the array half of the elements by pi.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>array_like</em>) â Three element array with a location for where the signature is relative to.</p></li>
<li><p><strong>stype</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>, </em><em>'doublesided'</em><em>, </em><em>etc. Default None</em>) â Chooses which type of signature to calculate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signature</strong> (<em>numpy.ndarray</em>) â The signature wrapped to the interval [-pi, pi].</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.arrays.DragonflyArray">
<em class="property">class </em><code class="sig-prename descclassname">levitate.arrays.</code><code class="sig-name descname">DragonflyArray</code><span class="sig-paren">(</span><em class="sig-param">shape=16</em>, <em class="sig-param">spread=0.01</em>, <em class="sig-param">offset=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">0)</em>, <em class="sig-param">normal=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">1)</em>, <em class="sig-param">rotation=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.arrays.DragonflyArray" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Rectangular array with Ultrahaptics Dragonfly U5 layout.</p>
<p>This is a 16x16 element array where the order of the transducer elements
are the same as the iteration order in the Ultrahaptics SDK. Otherwise
behaves exactly like a <a class="reference internal" href="#levitate.arrays.RectangularArray" title="levitate.arrays.RectangularArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RectangularArray</span></code></a>.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fields.html" class="btn btn-neutral float-right" title="Fields" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="transducers.html" class="btn btn-neutral float-left" title="Transducers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Carl Andersson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>