

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities &mdash; Levitate Python Toolbox 2.4.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Field Wrappers" href="field_wrappers.html" />
    <link rel="prev" title="Optimization" href="optimization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Levitate Python Toolbox
          

          
          </a>

          
            
            
              <div class="version">
                2.4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../package.html">Package Organization and Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../package.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#algorithms">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package.html#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#basic-trap">Basic Trap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#field-superposition">Field Superposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#complex-setups">Complex Setups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html#force-diagrams">Force Diagrams</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="transducers.html">Transducers</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">Optimization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-levitate.visualizers">Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-levitate.materials">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-levitate.hardware">Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="field_wrappers.html">Field Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#basic-types">Basic Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#squared-types">Squared Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multifield">MultiField</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#multipoint">MultiPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#implementation-details">Implementation Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_wrappers.html#class-list">Class list</a><ul>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#public-api">Public API</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#id2">Basic Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#magnitude-squared-types">Magnitude Squared Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multifields">MultiFields</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#multipoints">MultiPoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="field_wrappers.html#private-classes">Private Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Levitate Python Toolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">API Documentation</a> &raquo;</li>
        
      <li>Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api_docs/utilities.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<p>This page documents four modules, <a class="reference internal" href="#module-levitate.utils" title="levitate.utils"><code class="xref py py-obj docutils literal notranslate"><span class="pre">utils</span></code></a>, <a class="reference internal" href="#module-levitate.visualizers" title="levitate.visualizers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">visualizers</span></code></a>, <a class="reference internal" href="#module-levitate.materials" title="levitate.materials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">materials</span></code></a>, and <a class="reference internal" href="#module-levitate.hardware" title="levitate.hardware"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hardware</span></code></a>.</p>
<span class="target" id="module-levitate.utils"></span><p>Miscellaneous tools for small but common tasks.</p>
<dl class="data">
<dt id="levitate.utils.pressure_derivs_order">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">pressure_derivs_order</code><em class="property"> = ['', 'x', 'y', 'z', 'xx', 'yy', 'zz', 'xy', 'xz', 'yz', 'xxx', 'yyy', 'zzz', 'xxy', 'xxz', 'yyx', 'yyz', 'zzx', 'zzy', 'xyz']</em><a class="headerlink" href="#levitate.utils.pressure_derivs_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the order in which the pressure spatial derivatives are stored.</p>
</dd></dl>

<dl class="data">
<dt id="levitate.utils.num_pressure_derivs">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">num_pressure_derivs</code><em class="property"> = [1, 4, 10, 20]</em><a class="headerlink" href="#levitate.utils.num_pressure_derivs" title="Permalink to this definition">¶</a></dt>
<dd><p>Quick access to the number of spatial derivatives up to and including a certain order.</p>
</dd></dl>

<dl class="function">
<dt id="levitate.utils.dB">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">dB</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">power=False</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.dB" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ratio to decibels.</p>
<p>Converting a ratio to decibels depends on whether the ratio is a ratio
of amplitudes or a ratio of powers. For amplitudes the decibel value is
<span class="math notranslate nohighlight">\(20\log(|x|)\)</span>, while for power ratios the value is <span class="math notranslate nohighlight">\(10\log(|x|)\)</span>
where <span class="math notranslate nohighlight">\(\log\)</span> is the base 10 logarithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numeric</em>) – Linear amplitude or radio, can be complex.</p></li>
<li><p><strong>power</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>default False</em>) – Toggles if the ration is proportional to power.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>L</strong> (<em>numeric</em>) – The decibel value.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="levitate.utils.SPL">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">SPL</code><span class="sig-paren">(</span><em class="sig-param">p</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.SPL" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert sound pressure to sound pressure level.</p>
<p>Uses the standard reference value for airborne acoustics: 20 µPa.
Note that the input is the pressure amplitude, not the RMS value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>p</strong> (<em>numeric</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#complex" title="(in Python v3.8)"><em>complex</em></a>) – The complex sound pressure amplitude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>SPL</strong> (<em>numeric</em>) – The sound pressure level</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="levitate.utils.SVL">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">SVL</code><span class="sig-paren">(</span><em class="sig-param">u</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.SVL" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert sound particle velocity to sound velocity level.</p>
<p>Uses the standard reference value for airborne acoustics: 50 nm/s,
which is approximately 20 µPa / c_0 / rho_0
Note that the input the velocity amplitude(s), not the RMS values.</p>
<p>If the first axis of the velocity input has length 3, it will be assumed to
be the three Cartesian components of the velocity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>u</strong> (<em>numeric</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#complex" title="(in Python v3.8)"><em>complex</em></a>) – The complex sound velocity amplitude, or the vector velocity.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>SVL</strong> (<em>numeric</em>) – The sound velocity level</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="levitate.utils.SphericalHarmonicsIndexer">
<em class="property">class </em><code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">SphericalHarmonicsIndexer</code><span class="sig-paren">(</span><em class="sig-param">max_order=None</em>, <em class="sig-param">min_order=0</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.SphericalHarmonicsIndexer" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class to index spherical harmonics.</p>
<p>This class is designed to assist in converting between index and
order/mode form of spherical harmonics. All implementations in this
package should follow the conventions given by this class.</p>
<p>There are two main ways to convert between the forms, implemented by indexing or calling
the objects. Indexing with an index gives the corresponding tuple <code class="xref py py-obj docutils literal notranslate"><span class="pre">(order,</span> <span class="pre">mode)</span></code>,
while calling the object with such a tuple gives the corresponding index.
The objects are iterable, returning the <code class="xref py py-obj docutils literal notranslate"><span class="pre">(order,</span> <span class="pre">mode)</span></code> from the start order
to the maximum order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The maximum order to iterate to.</p></li>
<li><p><strong>min_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The order to start iterations from, default 0</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The objects will not prevent access to indices and orders beyond the max and min orders
used to create the object.</p>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<p>To loop over the orders and modes in a single for loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">SphericalHarmonicsIndexer</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
<span class="go">(0, 0)</span>
<span class="go">(1, -1)</span>
<span class="go">(1, 0)</span>
<span class="go">(1, 1)</span>
<span class="go">(2, -2)</span>
<span class="go">(2, -1)</span>
<span class="go">(2, 0)</span>
<span class="go">(2, 1)</span>
<span class="go">(2, 2)</span>
</pre></div>
</div>
<p>To loop over orders and modes in nested loops:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_idx</span> <span class="o">=</span> <span class="n">SphericalHarmonicsIndexer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sph_idx</span><span class="o">.</span><span class="n">orders</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;: &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">sph_idx</span><span class="o">.</span><span class="n">modes</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">()</span>
<span class="go">0: 0</span>
<span class="go">1: -1 0 1</span>
<span class="go">2: -2 -1 0 1 2</span>
<span class="go">3: -3 -2 -1 0 1 2 3</span>
</pre></div>
</div>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">min_order</span></code> attribute will shift the indexing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_idx</span> <span class="o">=</span> <span class="n">SphericalHarmonicsIndexer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sph_idx</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">(2, -2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sph_idx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">-4</span>
</pre></div>
</div>
<p>To get all orders and all modes is separated variables,
simply zip the object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">SphericalHarmonicsIndexer</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">(0, 1, 1, 1, 2, 2, 2, 2, 2)</span>
<span class="go">(0, -1, 0, 1, -2, -1, 0, 1, 2)</span>
</pre></div>
</div>
</div>
<dl class="method">
<dt id="levitate.utils.SphericalHarmonicsIndexer.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">order</em>, <em class="sig-param">mode</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.SphericalHarmonicsIndexer.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.utils.SphericalHarmonicsIndexer.orders">
<em class="property">property </em><code class="sig-name descname">orders</code><a class="headerlink" href="#levitate.utils.SphericalHarmonicsIndexer.orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over orders.</p>
<p>Iterator to iterate over the orders in the indexer.
Will enable the synchronized <a class="reference internal" href="#levitate.utils.SphericalHarmonicsIndexer.modes" title="levitate.utils.SphericalHarmonicsIndexer.modes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">modes</span></code></a> iterator.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.utils.SphericalHarmonicsIndexer.modes">
<em class="property">property </em><code class="sig-name descname">modes</code><a class="headerlink" href="#levitate.utils.SphericalHarmonicsIndexer.modes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over modes.</p>
<p>Synchronized iterator to iterate the modes in an order.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.utils.SphericalHarmonicsIndexer.ordersum">
<code class="sig-name descname">ordersum</code><span class="sig-paren">(</span><em class="sig-param">values</em>, <em class="sig-param">axis=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.SphericalHarmonicsIndexer.ordersum" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum spherical harmonics coefficients of the same order.</p>
<p>Calculates the sum of the coefficients for all modes for each order
individually. The <a class="reference internal" href="#levitate.utils.SphericalHarmonicsIndexer" title="levitate.utils.SphericalHarmonicsIndexer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SphericalHarmonicsIndexer</span></code></a> needs to be created to
match the orders of the expansion coefficients. This requires that the
length of the summation axis is the same as the number of coefficients
for the orders specified, i.e. <code class="xref py py-obj docutils literal notranslate"><span class="pre">values.shape[axis]</span> <span class="pre">==</span> <span class="pre">len(self)</span></code>.
If no axis is specified, the first suitable axis will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – The spherical harmonics expansion coefficients of a field.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The axis over which to sum.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>order_summed_coefs</strong> (<em>numpy.ndarray</em>) – The summed coefficients for each order.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="levitate.utils.find_trap">
<code class="sig-prename descclassname">levitate.utils.</code><code class="sig-name descname">find_trap</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">start_position</em>, <em class="sig-param">complex_transducer_amplitudes</em>, <em class="sig-param">tolerance=1e-05</em>, <em class="sig-param">time_interval=50</em>, <em class="sig-param">path_points=1</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.utils.find_trap" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the approximate location of a levitation trap.</p>
<p>Find an approximate position of a acoustic levitation trap close to a starting point.
This is done by following the radiation force in the sound field using an differential
equation solver. The differential equation is the unphysical equation
<span class="math notranslate nohighlight">\(d\vec x/dt  = \vec F(x,t)\)</span>, i.e. interpreting the force field as a velocity field.
This works for finding the location of a trap and the field line from the starting position
to the trap position, but it can not be seen as a proper kinematic simulation of the system.</p>
<p>The solving of the above equation takes place until the whole time interval is covered,
or the tolerance is met. The tolerance is evaluated using the assumption that the force
is zero at the trap, evaluating the distance from the zero-force position using the force
gradient.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>TrasducerArray</em>) – The transducer array to use for the solving.</p></li>
<li><p><strong>start_position</strong> (<em>array_like</em><em>, </em><em>3 elements</em>) – The starting point for the solving.</p></li>
<li><p><strong>complex_transducer_amplitudes</strong> (<em>complex array like</em>) – The complex transducer amplitudes to use for the solving.</p></li>
<li><p><strong>tolerance</strong> (<em>numeric</em><em>, </em><em>default 10e-6</em>) – The approximate tolerance of the solution, i.e. how close should
the found position be to the true position, in meters.</p></li>
<li><p><strong>time_interval</strong> (<em>numeric</em><em>, </em><em>default 50</em>) – The unphysical time of the solution range in the differential equation above.</p></li>
<li><p><strong>path_points</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default 1</em>) – Sets the number of points to return the path at.
A single evaluation point will only return the found position of the trap.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>trap_pos</strong> (<em>numpy.ndarray</em>) – The found trap position, or the path from the starting position to the trap position.</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="module-levitate.visualizers">
<span id="visualization"></span><h2>Visualization<a class="headerlink" href="#module-levitate.visualizers" title="Permalink to this headline">¶</a></h2>
<p>Visualization classes based on the plotly graphing library.</p>
<dl class="class">
<dt id="levitate.visualizers.Visualizer">
<em class="property">class </em><code class="sig-prename descclassname">levitate.visualizers.</code><code class="sig-name descname">Visualizer</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">*traces</em>, <em class="sig-param">display_scale='mm'</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.Visualizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="levitate.visualizers.Visualizer.insert">
<code class="sig-name descname">insert</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.Visualizer.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>S.insert(index, value) – insert value before index</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.visualizers.ArrayVisualizer">
<em class="property">class </em><code class="sig-prename descclassname">levitate.visualizers.</code><code class="sig-name descname">ArrayVisualizer</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.ArrayVisualizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualizations of a trandcuer array.</p>
<p>It is possible to set an item using either just a trace specifier,
e.g. “Pressure”, which create the appropriate trace with default arguments.
If arguments are required or wanted, set the item to a tuple where the
first element is the trace specifier, and subsequent elements are the
arguments. If the last element in the tuple is a dictionary, it will
be used as keyword arguments for the trace type.</p>
<dl class="method">
<dt id="levitate.visualizers.ArrayVisualizer.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">*complex_transducer_amplitudes</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.ArrayVisualizer.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.visualizers.ForceDiagram">
<em class="property">class </em><code class="sig-prename descclassname">levitate.visualizers.</code><code class="sig-name descname">ForceDiagram</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">scale_to_gravity=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.ForceDiagram" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="levitate.visualizers.ForceDiagram.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">*complex_transducer_amplitudes</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.visualizers.ForceDiagram.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-levitate.materials">
<span id="materials"></span><h2>Materials<a class="headerlink" href="#module-levitate.materials" title="Permalink to this headline">¶</a></h2>
<p>Manages material properties.</p>
<p>Many functions need access to some material properties.
In order to ensure that the properties of a specific material
is the same everywhere, they are all collected in classes here.</p>
<div class="admonition-pickling admonition">
<p class="admonition-title">Pickling</p>
<p>Pickling materials require some special consideration. In general there
should be a single set of properties defining a material, but loading
some data which is saved with modified properties will create a conflict.
The newly loaded material will be in a “Local” state, using modified properties
different from the global ones. It is recommended to resolve this by avoiding the
problem entirely by modifying the global properties before loading the old data.
If this is not possible or preferable, there are three functions intended to
resolve the conflict using either the global or the local properties.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Updating global material properties will change the properties throughout
the entire package, but some classes (notably the fields) pre-calculate
a lot of material-dependent properties. These properties will <strong>NOT</strong> be
updated after a material update. It is therefore highly recommended to
define the material properties once in the beginning of a session.</p>
</div>
<dl class="class">
<dt id="levitate.materials.MaterialMeta">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">MaterialMeta</code><a class="headerlink" href="#levitate.materials.MaterialMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass for materials.</p>
<p>This metaclass will automatically create the properties
defines in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">properties</span></code> variable in the class or its
bases. The properties implement a local/global system,
where each instance will default to use the global properties
unless otherwise specified.</p>
<dl class="method">
<dt id="levitate.materials.MaterialMeta.class_instance_property">
<em class="property">static </em><code class="sig-name descname">class_instance_property</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">doc=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.MaterialMeta.class_instance_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a local/global property.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.materials.Material">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">Material</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Material" title="Permalink to this definition">¶</a></dt>
<dd><p>Main base class for materials.</p>
<p>This class handles most of the functionality of the materials in the package.
Each material is required to have (at least) a speed of sound and a density,
from which the impedance and the compressibility can be calculated.
In most cases there should only be a single instance of each material class,
defining the properties of said material. Multiple instances might be
created while pickling see the section below. If a new material of an
existing material class is created with modified properties, it will
also be created in a “Local” state.</p>
<dl class="method">
<dt id="levitate.materials.Material.compressibility">
<em class="property">property </em><code class="sig-name descname">compressibility</code><a class="headerlink" href="#levitate.materials.Material.compressibility" title="Permalink to this definition">¶</a></dt>
<dd><p>Compressibility <span class="math notranslate nohighlight">\({1 \over \rho c^2}\)</span>, non settable.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.impedance">
<em class="property">property </em><code class="sig-name descname">impedance</code><a class="headerlink" href="#levitate.materials.Material.impedance" title="Permalink to this definition">¶</a></dt>
<dd><p>(Specific) Acoustic (wave) impedance <span class="math notranslate nohighlight">\(\rho c\)</span>, non settable.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.load_from_global">
<code class="sig-name descname">load_from_global</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Material.load_from_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Load properties from the global state.</p>
<p>Useful only on materials in a local state to resolve conflicts.
Replaces the current local properties with the global properties
and goes to global mode, completely removing the stored values.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.push_to_global">
<code class="sig-name descname">push_to_global</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Material.push_to_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Push the local properties to the global state.</p>
<p>Useful only on materials in a local state to resolve conflicts.
Replaces the current global properties with the modified local
ones, completely overriding the global properties for all global
instances.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.force_all_to_global">
<em class="property">classmethod </em><code class="sig-name descname">force_all_to_global</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Material.force_all_to_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Force all instances of this material to use global properties.</p>
<p>Useful to resolve material conflicts by choosing the global state
for all instances of the material. Will never change the global
properties, even if called from a locally modified instance.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.c">
<em class="property">property </em><code class="sig-name descname">c</code><a class="headerlink" href="#levitate.materials.Material.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The (longitudinal) speed of sound in the material, in m/s.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Material.rho">
<em class="property">property </em><code class="sig-name descname">rho</code><a class="headerlink" href="#levitate.materials.Material.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>The density of the material, in kg/m^3.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.materials.Gas">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">Gas</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Gas" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for ideal gases.</p>
<p>All ideal gases can determine the wave speed and density from
the ambient temperature and pressure using more basic material
constants, see <a class="reference internal" href="#levitate.materials.Gas.update_properties" title="levitate.materials.Gas.update_properties"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_properties</span></code></a>.</p>
<dl class="method">
<dt id="levitate.materials.Gas.update_properties">
<code class="sig-name descname">update_properties</code><span class="sig-paren">(</span><em class="sig-param">temperature=None</em>, <em class="sig-param">pressure=None</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Gas.update_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the material properties with the ambient conditions.</p>
<p>Sets the material properties of air according to</p>
<div class="math notranslate nohighlight">
\[\begin{split}c &amp;= \sqrt{\gamma R T}\\
\rho &amp;= {P \over R T}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(T\)</span> is the ambient temperature in Kelvin, <span class="math notranslate nohighlight">\(P\)</span> is the
ambient pressure, <span class="math notranslate nohighlight">\(\gamma\)</span> is the adiabatic index, and <span class="math notranslate nohighlight">\(R\)</span>
is the specific gas constant for the gas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temperature</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – The ambient temperature, in degrees Celsius. Defaults to 20.</p></li>
<li><p><strong>pressure</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – The static ambient air pressure, in Pa. Defaults to 101325.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Gas.c">
<em class="property">property </em><code class="sig-name descname">c</code><a class="headerlink" href="#levitate.materials.Gas.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The (longitudinal) speed of sound in the material, in m/s.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Gas.rho">
<em class="property">property </em><code class="sig-name descname">rho</code><a class="headerlink" href="#levitate.materials.Gas.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>The density of the material, in kg/m^3.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.materials.Solid">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">Solid</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Solid" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for elastic solids.</p>
<p>Solids can support shear waves, which is important for some
scattering problems.</p>
<dl class="method">
<dt id="levitate.materials.Solid.c_transversal">
<em class="property">property </em><code class="sig-name descname">c_transversal</code><a class="headerlink" href="#levitate.materials.Solid.c_transversal" title="Permalink to this definition">¶</a></dt>
<dd><p>Transversal wave speed.</p>
<p>The speed of sound for transversal waves, i.e. shear waves.
Calculated as <span class="math notranslate nohighlight">\(c\sqrt{{1-2\nu}\over{2-2\nu}}\)</span>, where
<span class="math notranslate nohighlight">\(\nu\)</span> is the Poisson’s ratio.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Solid.c">
<em class="property">property </em><code class="sig-name descname">c</code><a class="headerlink" href="#levitate.materials.Solid.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The (longitudinal) speed of sound in the material, in m/s.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Solid.poisson_ratio">
<em class="property">property </em><code class="sig-name descname">poisson_ratio</code><a class="headerlink" href="#levitate.materials.Solid.poisson_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Poisson’s ratio, related to shear wave speed.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Solid.rho">
<em class="property">property </em><code class="sig-name descname">rho</code><a class="headerlink" href="#levitate.materials.Solid.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>The density of the material, in kg/m^3.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.materials.Air">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">Air</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Air" title="Permalink to this definition">¶</a></dt>
<dd><p>Properties of air.</p>
<p>Has default values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mf">343.2367605312694</span>
<span class="n">rho</span> <span class="o">=</span> <span class="mf">1.2040847588826422</span>
</pre></div>
</div>
<dl class="method">
<dt id="levitate.materials.Air.c">
<em class="property">property </em><code class="sig-name descname">c</code><a class="headerlink" href="#levitate.materials.Air.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The (longitudinal) speed of sound in the material, in m/s.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Air.rho">
<em class="property">property </em><code class="sig-name descname">rho</code><a class="headerlink" href="#levitate.materials.Air.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>The density of the material, in kg/m^3.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="levitate.materials.Styrofoam">
<em class="property">class </em><code class="sig-prename descclassname">levitate.materials.</code><code class="sig-name descname">Styrofoam</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.materials.Styrofoam" title="Permalink to this definition">¶</a></dt>
<dd><p>Properties of styrofoam.</p>
<p>Has default values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">2350</span>
<span class="n">rho</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">poisson_ratio</span> <span class="o">=</span> <span class="mf">0.35</span>
</pre></div>
</div>
<dl class="method">
<dt id="levitate.materials.Styrofoam.c">
<em class="property">property </em><code class="sig-name descname">c</code><a class="headerlink" href="#levitate.materials.Styrofoam.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The (longitudinal) speed of sound in the material, in m/s.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Styrofoam.poisson_ratio">
<em class="property">property </em><code class="sig-name descname">poisson_ratio</code><a class="headerlink" href="#levitate.materials.Styrofoam.poisson_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Poisson’s ratio, related to shear wave speed.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.materials.Styrofoam.rho">
<em class="property">property </em><code class="sig-name descname">rho</code><a class="headerlink" href="#levitate.materials.Styrofoam.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>The density of the material, in kg/m^3.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-levitate.hardware">
<span id="hardware"></span><h2>Hardware<a class="headerlink" href="#module-levitate.hardware" title="Permalink to this headline">¶</a></h2>
<p>Hardware related classes and functions.</p>
<p>Various classes and functions to interface with Ultrahaptics
hardware.</p>
<div class="admonition-disclaimer admonition">
<p class="admonition-title">Disclaimer</p>
<p>This module is not related to Ultrahaptics as a company, and it not part of their
SDK. It is simply a non-programmer’s way around testing everything in C++.</p>
<p><strong>Use at your own risk!</strong></p>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#levitate.hardware.TCPArray" title="levitate.hardware.TCPArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TCPArray</span></code></a></p></td>
<td><p>Communicate with a Ultrahaptics array via TCP.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#levitate.hardware.data_to_cpp" title="levitate.hardware.data_to_cpp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_to_cpp</span></code></a></p></td>
<td><p>Write data to a file suitable for c++.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#levitate.hardware.data_from_cpp" title="levitate.hardware.data_from_cpp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_from_cpp</span></code></a></p></td>
<td><p>Read data previously written for c++.</p></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="levitate.hardware.data_to_cpp">
<code class="sig-prename descclassname">levitate.hardware.</code><code class="sig-name descname">data_to_cpp</code><span class="sig-paren">(</span><em class="sig-param">complex_values</em>, <em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.data_to_cpp" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to a file suitable for c++.</p>
<p>Takes numpy data and writes it to a file which is simple to read from c++.
Internally uses <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.tofile</span></code> for the actual write.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>complex_values</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – The complex transducer values for the array.
The order of the transducers must match the internal order of the array.</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – The filename of the file to create.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The data will be normalized to have a maximum amplitude of 1.</p></li>
<li><p>The data will be written as 64 bit complex floats, i.e. 32 bit real + 32 bit imaginary.</p></li>
<li><p>The data will be conjugated: Ultrahaptics uses a different phase convention.</p></li>
</ul>
</div>
</dd></dl>

<dl class="function">
<dt id="levitate.hardware.data_from_cpp">
<code class="sig-prename descclassname">levitate.hardware.</code><code class="sig-name descname">data_from_cpp</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">num_transducers</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.data_from_cpp" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data previously written for c++.</p>
<p>This is the inverse of <a class="reference internal" href="#levitate.hardware.data_to_cpp" title="levitate.hardware.data_to_cpp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_to_cpp</span></code></a>, and is used to read data
previously written with said function, or with similar conventions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>String</em><em> or </em><em>open file</em>) – The file to read. See <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html#numpy.fromfile" title="(in NumPy v1.17)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fromfile</span></code></a>.</p></li>
<li><p><strong>num_transducers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of transducers in the array. This is important to be able to reshape
the data and have the correct number of states in the output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> (<em>numpy.ndarray</em>) – The data read from the file. Shape <code class="xref py py-obj docutils literal notranslate"><span class="pre">(M,</span> <span class="pre">N)</span></code> where <code class="xref py py-obj docutils literal notranslate"><span class="pre">M</span></code> is the number
of states in the file, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">N</span></code> is the number of transducers specified.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The data is assumed to be 64 bit complex floats, i.e. 32 bit real + 32 bit imaginary.</p></li>
<li><p>The data will be conjugated: Ultrahaptics uses a different phase convention.</p></li>
</ul>
</div>
</dd></dl>

<dl class="class">
<dt id="levitate.hardware.TCPArray">
<em class="property">class </em><code class="sig-prename descclassname">levitate.hardware.</code><code class="sig-name descname">TCPArray</code><span class="sig-paren">(</span><em class="sig-param">ip='127.0.0.1'</em>, <em class="sig-param">port=0</em>, <em class="sig-param">use_array=True</em>, <em class="sig-param">verbose=0</em>, <em class="sig-param">normalize=True</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.TCPArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Communicate with a Ultrahaptics array via TCP.</p>
<p>Starts a c++ process in the background which connects to a Ultrahaptics array.
Communicates with the c++ program using TCP messages.
The only mode implemented for the array is a cyclical transition of stored states.
A number of states is loaded, either from file or sent via TCP. The states are
cycled through in a configurable rate or manually. At the end of the list of states
the cycle starts over from the start.
This makes it relatively easy to create closed paths by ensuring that the last state
and the first state is designed to levitate at (almost) the same position.</p>
<p>The required binary file <code class="xref py py-obj docutils literal notranslate"><span class="pre">array_control</span></code> is compiled from the included c++ source files if not present.
Inspect the makefile in unix systems, or make.bat on windows to see how the files are compiled.
If the compilation fails a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> is raised. If the binary already exists it will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>string</em><em>, </em><em>default '127.0.0.1'</em>) – The IP address to use for the local TCP-connection.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default 0</em>) – The port to use for the TCP connection.</p></li>
<li><p><strong>use_array</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>default True</em>) – Set to false to not try to connect to an array, just run the c++
executable in the background. Mostly for debugging.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default 0</em>) – Control the verbosity level of the c++ program.
0 will not print anything, higher values will give more information.</p></li>
<li><p><strong>normalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>default True</em>) – Toggles normalization of the state amplitudes.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="levitate.hardware.TCPArray.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.TCPArray.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the collection to the array and terminate the c++ process.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.executable">
<em class="property">property </em><code class="sig-name descname">executable</code><a class="headerlink" href="#levitate.hardware.TCPArray.executable" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the binary to use.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.emit">
<em class="property">property </em><code class="sig-name descname">emit</code><a class="headerlink" href="#levitate.hardware.TCPArray.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Control if the array is emitting or not.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.amplitude">
<em class="property">property </em><code class="sig-name descname">amplitude</code><a class="headerlink" href="#levitate.hardware.TCPArray.amplitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Control the overall amplitude scaling of the array.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.rate">
<em class="property">property </em><code class="sig-name descname">rate</code><a class="headerlink" href="#levitate.hardware.TCPArray.rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Control the state transition rate of the array, in Hz.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.next">
<code class="sig-name descname">next</code><span class="sig-paren">(</span><em class="sig-param">count=1</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.TCPArray.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Go to the next state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – How many states to move, default 1.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.prev">
<code class="sig-name descname">prev</code><span class="sig-paren">(</span><em class="sig-param">count=1</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.TCPArray.prev" title="Permalink to this definition">¶</a></dt>
<dd><p>Go to the previous state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – How many states to move, default 1.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.num_transducers">
<em class="property">property </em><code class="sig-name descname">num_transducers</code><a class="headerlink" href="#levitate.hardware.TCPArray.num_transducers" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of transducers in the array.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.positions">
<em class="property">property </em><code class="sig-name descname">positions</code><a class="headerlink" href="#levitate.hardware.TCPArray.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Positions of the transducer elements.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.normals">
<em class="property">property </em><code class="sig-name descname">normals</code><a class="headerlink" href="#levitate.hardware.TCPArray.normals" title="Permalink to this definition">¶</a></dt>
<dd><p>Normals of the transducer elements.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.index">
<em class="property">property </em><code class="sig-name descname">index</code><a class="headerlink" href="#levitate.hardware.TCPArray.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Current state index.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.states">
<em class="property">property </em><code class="sig-name descname">states</code><a class="headerlink" href="#levitate.hardware.TCPArray.states" title="Permalink to this definition">¶</a></dt>
<dd><p>Control the stored states.</p>
<p>Set this property to send new states to the array.
Get this property to check what states are stored for the array.
The states have the shape <code class="xref py py-obj docutils literal notranslate"><span class="pre">(M,</span> <span class="pre">N)</span></code>, where <code class="xref py py-obj docutils literal notranslate"><span class="pre">M</span></code> is the number of states,
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">N</span></code> is the number of transducers in the array.</p>
</dd></dl>

<dl class="method">
<dt id="levitate.hardware.TCPArray.read_file">
<code class="sig-name descname">read_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#levitate.hardware.TCPArray.read_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a file with states.</p>
<p>Specify a file with states to read in the c++ process.
This is not to be confused with <code class="xref py py-obj docutils literal notranslate"><span class="pre">data_from_c++</span></code>, which
reads a file to a numpy.array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The file to read.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="field_wrappers.html" class="btn btn-neutral float-right" title="Field Wrappers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="optimization.html" class="btn btn-neutral float-left" title="Optimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Carl Andersson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>